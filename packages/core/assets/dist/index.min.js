var e={d:(n,t)=>{for(var r in t)e.o(t,r)&&!e.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:t[r]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n)},n={};e.d(n,{KS:()=>b,vH:()=>f,ji:()=>k,E5:()=>h,bk:()=>m,Ei:()=>u,Zs:()=>p});class t{constructor(e){this.subscriberCount=0,this.value=e,this.subscribers=[]}next(e){this.value=e;for(const n of this.subscribers)n(e)}subscribe(e){this.subscribers.push(e),this.subscriberCount++}restore(){this.subscribers=[],this.value=void 0}}function r(e){let n={value:e.value};return e.subscribe((e=>n.value=e)),new Proxy(n,{get(n,t){if(t===s)return e;const r=Reflect.get(n,"value"),a=r[t];return"function"==typeof a?a.bind(r):a},ownKeys:e=>Reflect.ownKeys(e.value)})}class a{constructor(){this.current}}const o=new t,s=Symbol("isProxy");class i{constructor(e,n){this.didUpdateOnce=!1,this.didMountCallbacks=[],this.didUpdateCallbacks=[],this.willUnmountCallbacks=[],this.type=n,this.generator=e,o.next(this),o.restore()}render(){return this.node=this.generator(),this.node}onComponentDidMount(e){this.didMountCallbacks.push(e)}onComponentDidUpdate(e){this.didUpdateCallbacks.push(e)}onComponentWillUnmount(e){this.willUnmountCallbacks.push(e)}didUpdate(){this.didUpdateOnce?this.didUpdateCallbacks.forEach((e=>e(this.node))):(this.didMountCallbacks.forEach((e=>e(this.node))),this.didUpdateOnce=!0)}}function c(e,n){if(n instanceof DocumentFragment)return e.appendChild(n),n;{o.next(n);let t=n.render();return e.appendChild(t),n.didUpdate(),t}}const l={allowObjectProperties:!1};function u(e){const n=new t(e);let a;return o.subscribe((e=>{a=e})),[r(n),e=>(n.next(e),a.node.replaceWith&&a.node.replaceWith(a.render()),e)]}const d=function e(n,t){if(n===t)return!0;if(!(n instanceof Object&&t instanceof Object))return!1;if(n.constructor!==t.constructor)return!1;for(var r in n)if(n.hasOwnProperty(r)){if(!t.hasOwnProperty(r))return!1;if(n[r]!==t[r]){if("object"!=typeof n[r])return!1;if(!e(n[r],t[r]))return!1}}for(r in t)if(t.hasOwnProperty(r)&&!n.hasOwnProperty(r))return!1;return!0};function f(e,n=[]){var r=n.map((e=>e.valueOf()));const a=o.value,s=t=>{if(r.length>0){let a=!1;for(let e=0;e<r.length;e++)if(!d(r[e],n[e].valueOf())){a=!0;break}a&&(e(t),r=n.map((e=>e.valueOf())))}else e(t)};a.onComponentDidMount(s),a.onComponentDidUpdate(s),n.forEach((e=>{e instanceof t&&e.subscribe(s)}))}function m(){return new a}function p(e){const n=e=>{for(var n="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",r=t.length,a=0;a<e;a++)n+=t.charAt(Math.floor(Math.random()*r));return n};let t=document.createElement("style");document.head.appendChild(t);let r,a=t.sheet,o="";const s={},i=e=>{for(const t in e){let c=e[t];if(null===c)r.style[t]="none";else if("number"==typeof c)r.style[t]=c+"px";else if("string"==typeof c)r.style[t]=c;else{if(t.indexOf("&")>-1){let e=t.replace(/&/g,o);a.insertRule(`.${e} {}`,0),o=e}else{const e=n(10);a.insertRule(`.${e} {}`,0),o=e,s[t]=e}r=a.cssRules[0],i(c)}}};return i(e),s}function k(e,n){let a=e();const o=new t(a),i=r(o);for(const r of n){let n=r[s];n instanceof t&&n.subscribe((()=>{o.next(e())}))}return i}function h(e,n,t=(e=>e)){let r=t(n);const[a,o]=u(r);return[a,n=>{let t=e(a,n);o(t)}]}const b={options:l,Component:i,Fragment:"div",make:function(e,n,...r){let o;if(n=n||{},"function"==typeof e){n.children=r||[];let t=e(n);if("function"!=typeof t)throw new Error("Snowblind component initializers must return a function.");return new i(t,e.displayName||e.name)}o=-32===e?document.createDocumentFragment():document.createElement(e);for(const[e,r]of Object.entries(n))if("function"==typeof r)o[e]=r;else if(r instanceof t)o.setAttribute(e,r.value);else if(r instanceof a)r.current=o;else if("object"==typeof r)if("style"===e)for(let[e,n]of Object.entries(r))null===n?n="none":"number"==typeof n&&(n+="px"),o.style[e]=n;else if("props"===e)for(const[e,n]of Object.entries(r))o[e]=n;else l.allowObjectProperties&&o.setAttribute(e,JSON.stringify(r));else o.setAttribute(e,r.toString());const u=e=>{for(const n of e)if(Array.isArray(n))u(n);else if(n instanceof i)c(o,n),n.didUpdate();else if(n instanceof HTMLElement)o.appendChild(n);else if(n&&n[s]instanceof t){let e=document.createTextNode(n);o.appendChild(e)}else o.appendChild(document.createTextNode(n))};return u(r.flat(1/0)),o},render:c};var v=n.KS,y=n.bk,g=n.Ei,O=new WebSocket("ws://localhost:8088");function w(e){var n=e.offset,t=e.data[n],r=g(0),a=r[0],o=r[1];return document.body.addEventListener("keydown",(function(e){e.target instanceof HTMLInputElement||["1","2","3"].indexOf(e.key)>-1&&o(parseInt(e.key)-1)})),function(){if(t){var r=new Date(t.startTime),s=t.result.assertions.reduce((function(e,n){return!0===n.result?[e[0],e[1]+1]:[e[0]+1,e[1]]}),[0,0]),i=s[0],c=s[1];return v.make("div",null,v.make("span",null,function(e){var n=function(e){return e.toString().trim().padStart(2,"0")};return"".concat(["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()]," ").concat(n(e.getDate())," ").concat(e.getFullYear()," ").concat(n(e.getHours()),":").concat(n(e.getMinutes()),":").concat(n(e.getSeconds()))}(r)," - ",n+1," of ",e.data.length),v.make("h2",null,v.make("a",{onclick:function(){x(t.inputFile)}},t.inputFile)," - ",S(r)," ago"),v.make("div",{class:"row gap-md"},v.make("button",{onclick:function(){return o(0)}},"General"),v.make("button",{onclick:function(){return o(1)}},"Imports"),v.make("button",{onclick:function(){return o(2)}},"Snapshots")),v.make("h3",null,i," of ",i+c," tests failed ",v.make("span",{class:"info"},"(",i/(c+i)*100,"%)"),"."),v.make(E,{sectionIndex:a,data:t}))}return v.make("div",{class:"center justify-center"},v.make("h1",null,"Waiting for data..."))}}function x(e,n,t){var r={file:e};n&&(r.line=n),t&&(r.column=t),O.send(JSON.stringify({type:"POST",action:"OPEN_FILE",data:r}))}function E(e){for(var n=g(0),t=n[0],r=n[1],a=e.data.result.assertions,o=g(Object.entries(a)),s=o[0],i=o[1],c="",l=y(),u=e.data,d=u.result.groups,f={},m=0,p=Object.keys(d);m<p.length;m++)for(var k=p[m],h=0,b=d[k];h<b.length;h++){var O=b[h];f[O]=k}return function(){var n;if(0==e.sectionIndex){var o=a[t],d=o.result?"success":"failure",m=u.inputFile.split("/").at(-1),p=o.content.length;return v.make("div",null,v.make("input",{type:"text",placeholder:"Filter by groups...",oninput:function(){return e=l.current.value,n=l.current.selectionStart,t=l.current.selectionEnd,r={},a.forEach((function(n,t){f[t]&&f[t].substring(0,e.length)===e&&(r[t]=n)})),c=e,i(Object.entries(r)),l.current.setSelectionRange(n,t),void l.current.focus();var e,n,t,r},ref:l,value:c}),v.make("div",{class:"result-container"},s.map((function(e){var n=e[0],a=e[1],o="result column gap-sm "+(a.result?"success":"failure")+(n==t?" selected":"");return v.make("div",{class:o,onclick:function(){return r(n)}},v.make("a",{onclick:function(){x(u.inputFile,a.line+1,p)}},m,"#",a.line+1),v.make("p",null,v.make("code",null,a.content)),v.make("p",null,a.description||"No description provided."),v.make("p",null,f[n]?v.make("span",{class:"info"},f[n]):""))}))),v.make("div",{class:"detail-container",style:{border:"1px solid #ddd",padding:"10px",borderRadius:4}},v.make("h3",null,v.make("a",{onclick:function(){x(u.inputFile,o.line+1,p)}},m,"#",o.line+1)," - ",v.make("span",{class:d,style:{textTransform:"uppercase"}},d)),v.make("p",{style:{marginBottom:10}},o.description||"No description provided."),j(o.context,o.line),v.make("h3",null,"Scope:"),v.make("pre",null,v.make("code",null,C(null===(n=u.snapshots.at(-1))||void 0===n?void 0:n.scope)))))}return 1==e.sectionIndex?v.make(v.Fragment,null,u.imports.map((function(e,n){return v.make("div",{class:"column gap-sm"},v.make("h3",null,e.source," - Line ",e.line),v.make("div",{class:"result-container"},e.specifiers.map((function(e){var n="result column gap-sm "+(e.default?"info":"");return v.make("div",{class:n},v.make("p",null,e.name))}))))})),0===u.imports.length?v.make("h3",null,"There are no imports here."):""):2==e.sectionIndex?v.make(v.Fragment,null,u.snapshots.map((function(e,n){return v.make("div",{class:"snapshot"},v.make("code",{style:{marginBottom:10}},e.event.name," = ",C(e.event.value,0,!0),";"),j(e.context,e.event.line))}))):v.make(v.Fragment,null)}}function C(e,n,t){void 0===n&&(n=0),void 0===t&&(t=!1);var r={marginLeft:10*n};t&&(r.display="inline");var a=y(),o=v.make("span",{class:"code fold",onclick:function(){a.current.classList.toggle("folded")}});return"string"==typeof e?v.make("span",{class:"code string"},'"',e,'"'):"number"==typeof e?v.make("span",{class:"code number"},e):"object"==typeof e&&Array.isArray(e)?v.make("div",{style:r,class:"code array",ref:a},o,v.make("span",{class:"code open-bracket"}),e.map((function(e){return C(e,n+1)})),v.make("span",{class:"code closing-bracket"})):"object"==typeof e?v.make("div",{style:r,class:"code object",ref:a},o,v.make("span",{class:"code open-brace"}),Object.entries(e).map((function(e){var t=e[0],r=e[1];return v.make("code",{class:"line"},v.make("span",{class:"code string key"},'"',t,'"'),C(r,n+1))})),v.make("span",{class:"code closing-brace"})):v.make("span",{class:"code boolean"},e)}function j(e,n){return v.make("pre",null,Object.entries(e).map((function(e){var t=e[0],r=e[1];return parseInt(t)===n?v.make("code",{class:"highlight-line"},v.make("span",{class:"line-number"},t),r):v.make("code",null,v.make("span",{class:"line-number"},t),r)})))}function S(e){var n=Math.floor((new Date-e)/1e3),t=n/31536e3,r=function(e){var n=Math.floor(t);return n+" "+e+(n>1?"s":"")};return(t=n/31536e3)>1?r("year"):(t=n/2592e3)>1?r("month"):(t=n/86400)>1?r("day"):(t=n/3600)>1?r("hour"):(t=n/60)>1?r("minute"):(t=n,r("second"))}v.render(document.body,v.make((function(){var e=g([]),n=e[0],t=e[1],r=g(0),a=r[0],o=r[1],s=function(e){e>=n.length?o(0):o(e<0?n.length-1:e)};function i(){O.send(JSON.stringify({type:"DELETE",action:"REMOVE_ALL",data:{}}))}function c(){O.send(JSON.stringify({type:"POST",action:"RUN_ALL",data:{}}))}return O.onmessage=function(e){var n=JSON.parse(e.data);t(n.data)},document.body.addEventListener("keydown",(function(e){e.target instanceof HTMLInputElement||("e"==e.key?s(a+1):"q"==e.key&&s(a-1))})),function(){return v.make(v.Fragment,null,v.make("div",{class:"sidebar center"},v.make("div",{class:"row gap-md"},v.make("button",{onclick:i},"Remove All"),v.make("button",{onclick:c},"Run All")),n.map((function(e,n){var t="item-select"+(n==a?" selected":"");return v.make("div",{class:t,onclick:function(){return s(n)}},v.make("a",null,e.inputFile.split("/").at(-1)),v.make("span",null,S(new Date(e.startTime))," ago"),e.startTime>Date.now()-6e4?v.make("span",{class:"info"},"New"):"")}))),v.make("div",{class:"main"},v.make(w,{data:n,offset:a})))}}),null));